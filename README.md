# CodeAnalysis

<div align="center">

![Python](https://img.shields.io/badge/Python-3.8+-blue.svg)
![License](https://img.shields.io/badge/License-MIT-green.svg)
![Tests](https://img.shields.io/badge/Tests-32%20passed-brightgreen.svg)
![Coverage](https://img.shields.io/badge/Coverage-100%25-brightgreen.svg)

**æ™ºèƒ½Pythonä»£ç ç»“æ„åˆ†æå¹³å°**

*è®©ä»£ç ç»“æ„å¯è§†åŒ–ï¼Œè®©æ¶æ„ä¼˜åŒ–æ•°æ®åŒ–*

[å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹) â€¢ [åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§) â€¢ [æ–‡æ¡£](#æ–‡æ¡£) â€¢ [ç¤ºä¾‹](#ç¤ºä¾‹)

</div>

---

## ğŸ¯ é¡¹ç›®ç®€ä»‹

CodeAnalysisæ˜¯ä¸€ä¸ªä¸“ä¸šçš„**Pythonä»£ç é™æ€åˆ†æå·¥å…·**ï¼Œç»“åˆä¼ ç»Ÿå›¾ç®—æ³•ä¸ç°ä»£AIæŠ€æœ¯ï¼Œä¸ºå¼€å‘è€…æä¾›æ·±åº¦çš„ä»£ç ç†è§£å’Œæ¶æ„ä¼˜åŒ–å»ºè®®ã€‚

### æ ¸å¿ƒä»·å€¼
- ğŸ“Š **é‡åŒ–åˆ†æ**: å°†ä»£ç ç»“æ„è½¬åŒ–ä¸ºå¯é‡åŒ–çš„æŒ‡æ ‡
- ğŸ” **æ·±åº¦ç†è§£**: AIé©±åŠ¨çš„ä»£ç è¯­ä¹‰ç†è§£
- ğŸ—ï¸ **æ¶æ„ä¼˜åŒ–**: åŸºäºç¤¾åŒºæ£€æµ‹çš„é‡æ„å»ºè®®
- ğŸ“ˆ **æŒç»­æ”¹è¿›**: æ”¯æŒCI/CDé›†æˆçš„è´¨é‡ç›‘æ§

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ” æ™ºèƒ½ä»£ç åˆ†æ
- **ç»“æ„æå–**: è‡ªåŠ¨è¯†åˆ«ç±»ã€å‡½æ•°ã€æ¨¡å—åŠå…¶å…³ç³»
- **å¤æ‚åº¦è¯„ä¼°**: å¤šç»´åº¦ä»£ç è´¨é‡å’Œå¤æ‚åº¦æŒ‡æ ‡
- **ä¾èµ–åˆ†æ**: æ·±åº¦åˆ†æä»£ç é—´çš„è°ƒç”¨å’Œç»§æ‰¿å…³ç³»
- **AIè¯­ä¹‰ç†è§£**: DeepSeeké©±åŠ¨çš„ä»£ç åŠŸèƒ½å’Œè´¨é‡è¯„ä¼°

### ğŸ˜ï¸ ç¤¾åŒºæ£€æµ‹ç®—æ³•
- **Leidenç®—æ³•**: é«˜è´¨é‡ç¤¾åŒºæ£€æµ‹ï¼ˆæ¨èï¼‰
- **Louvainç®—æ³•**: å¿«é€Ÿæ¨¡å—åº¦ä¼˜åŒ–
- **Girvan-Newman**: å±‚æ¬¡ç»“æ„åˆ†æ
- **Label Propagation**: è¶…å¿«é€Ÿå¤„ç†

### ğŸ“Š å¯è§†åŒ–æŠ¥å‘Š
- **HTMLç»¼åˆæŠ¥å‘Š**: ä¸“ä¸šçº§åˆ†ææŠ¥å‘Š
- **äº¤äº’å¼å›¾è¡¨**: Plotlyé©±åŠ¨çš„ç½‘ç»œå¯è§†åŒ–
- **é™æ€å›¾åƒ**: ç¤¾åŒºç»“æ„å’ŒæŒ‡æ ‡å›¾è¡¨
- **å¤šæ ¼å¼å¯¼å‡º**: JSONã€GraphMLç­‰æ ¼å¼æ”¯æŒ

### ğŸ› ï¸ å¼€å‘ä½“éªŒ
- **å‘½ä»¤è¡Œå·¥å…·**: å®Œæ•´çš„CLIç•Œé¢
- **Python API**: çµæ´»çš„ç¼–ç¨‹æ¥å£
- **æ™ºèƒ½ç¼“å­˜**: LangChain SQLiteç¼“å­˜æ˜¾è‘—æå‡é‡å¤åˆ†ææ€§èƒ½
- **é…ç½®ç®¡ç†**: ç¯å¢ƒå˜é‡å’Œå‚æ•°é…ç½®
- **é”™è¯¯å¤„ç†**: å®Œå–„çš„å¼‚å¸¸å¤„ç†å’Œé™çº§æœºåˆ¶

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç³»ç»Ÿè¦æ±‚
- Python 3.8+
- 2GB+ RAM (æ¨è4GB+)
- 500MB ç£ç›˜ç©ºé—´

### å®‰è£…æ­¥éª¤

```bash
# 1. å…‹éš†é¡¹ç›®
git clone <repository-url>
cd CodeAnalysis

# 2. å®‰è£…æ ¸å¿ƒä¾èµ–
pip install -r requirements.txt

# 3. å®‰è£…å¯é€‰ä¾èµ–ï¼ˆæ¨èï¼‰
pip install leidenalg python-louvain plotly

# 4. é…ç½®AIåŠŸèƒ½ï¼ˆå¯é€‰ï¼‰
cp .env.template .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œè®¾ç½® DEEPSEEK_API_KEY
```

### 30ç§’ä½“éªŒ

```bash
# å¿«é€Ÿåˆ†æç¤ºä¾‹é¡¹ç›®
python main.py analyze sample_project --detect-communities

# ç”Ÿæˆå®Œæ•´æŠ¥å‘Š
python main.py analyze sample_project --detect-communities --generate-report

# AIå¢å¼ºåˆ†æï¼ˆéœ€é…ç½®API keyï¼‰
python main.py analyze sample_project --enable-deepseek --detect-communities
```

## ğŸ“– ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬åˆ†æ

```bash
# åˆ†æé¡¹ç›®ç»“æ„
python main.py analyze /path/to/your/project

# åŒ…å«ç¤¾åŒºæ£€æµ‹çš„å®Œæ•´åˆ†æ
python main.py analyze /path/to/your/project --detect-communities --generate-report

# ä½¿ç”¨ç‰¹å®šç®—æ³•è¿›è¡Œç¤¾åŒºæ£€æµ‹
python main.py analyze /path/to/your/project --detect-communities --algorithm leiden
```

### ç®—æ³•æ¯”è¾ƒ

```bash
# æ¯”è¾ƒæ‰€æœ‰ç¤¾åŒºæ£€æµ‹ç®—æ³•
python main.py compare /path/to/your/project

# æ¯”è¾ƒç‰¹å®šç®—æ³•
python main.py compare /path/to/your/project --algorithms leiden louvain

# ä¿å­˜æ¯”è¾ƒç»“æœ
python main.py compare /path/to/your/project --save-comparison
```

### ç³»ç»Ÿæµ‹è¯•

```bash
# æµ‹è¯•DeepSeek APIè¿æ¥
python main.py test --test-deepseek

# æµ‹è¯•ç¤ºä¾‹é¡¹ç›®
python main.py test --test-sample

# å®Œæ•´æµ‹è¯•
python main.py test --test-deepseek --test-sample

# ç¼“å­˜ç®¡ç†
python main.py cache info    # æŸ¥çœ‹ç¼“å­˜çŠ¶æ€
python main.py cache clear   # æ¸…ç©ºç¼“å­˜
```

## ç¼–ç¨‹æ¥å£

### åŸºæœ¬ä½¿ç”¨

```python
from code_analysis import CodeAnalysis

# åˆå§‹åŒ–åˆ†æå™¨
analyzer = CodeAnalysis("/path/to/your/project")

# æ‰§è¡Œåˆ†æ
results = analyzer.analyze_project()

# è·å–æ‘˜è¦
summary = analyzer.get_summary()
print(f"å‘ç° {summary['total_classes']} ä¸ªç±»ï¼Œ{summary['total_functions']} ä¸ªå‡½æ•°")

# ç¤¾åŒºæ£€æµ‹
communities = analyzer.detect_communities(algorithm='leiden')
print(f"æ£€æµ‹åˆ° {communities['num_communities']} ä¸ªç¤¾åŒº")

# ç”ŸæˆæŠ¥å‘Š
report_files = analyzer.generate_report()
print(f"æŠ¥å‘Šå·²ç”Ÿæˆ: {report_files}")
```

### é«˜çº§åŠŸèƒ½

```python
# æ¯”è¾ƒç®—æ³•
comparison = analyzer.compare_community_algorithms(['leiden', 'louvain'])
best_algorithm = comparison['best_algorithm']

# å¯¼å‡ºå›¾
analyzer.export_graph('project_graph.graphml', 'graphml')

# è‡ªå®šä¹‰ç¤¾åŒºåˆ†æ
community_stats = analyzer.analyze_community_structure(communities['communities'])
```

## é…ç½®é€‰é¡¹

ç¯å¢ƒå˜é‡é…ç½®ï¼ˆ.envæ–‡ä»¶ï¼‰:

```bash
# DeepSeek APIé…ç½®
DEEPSEEK_API_KEY=your_api_key_here
DEEPSEEK_BASE_URL=https://api.deepseek.com
DEEPSEEK_MODEL=deepseek-chat
DEEPSEEK_MAX_TOKENS=8192
DEEPSEEK_TEMPERATURE=0

# åˆ†æè®¾ç½®
MAX_FILE_SIZE=1000000
ANALYSIS_TIMEOUT=300

# å¯è§†åŒ–è®¾ç½®
PLOT_DPI=300
PLOT_STYLE=seaborn
FIGURE_SIZE_WIDTH=12
FIGURE_SIZE_HEIGHT=8
```

## è¾“å‡ºæ–‡ä»¶

åˆ†æå®Œæˆåï¼Œä¼šåœ¨è¾“å‡ºç›®å½•ç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š

- `analysis_report_*.html` - å®Œæ•´çš„HTMLåˆ†ææŠ¥å‘Š
- `analysis_results_*.json` - JSONæ ¼å¼çš„åˆ†æç»“æœ
- `communities_*.png` - ç¤¾åŒºå¯è§†åŒ–å›¾
- `community_metrics_*.png` - ç¤¾åŒºæŒ‡æ ‡å›¾è¡¨
- `interactive_graph_*.html` - äº¤äº’å¼å›¾è¡¨ï¼ˆå¦‚æœå®‰è£…äº†Plotlyï¼‰

## æ”¯æŒçš„ç®—æ³•

### ç¤¾åŒºæ£€æµ‹ç®—æ³•

1. **Leidenç®—æ³•** (é»˜è®¤): é«˜è´¨é‡çš„ç¤¾åŒºæ£€æµ‹ï¼Œé€‚ç”¨äºå¤§è§„æ¨¡ç½‘ç»œ
2. **Louvainç®—æ³•**: å¿«é€Ÿçš„æ¨¡å—åº¦ä¼˜åŒ–ç®—æ³•
3. **Girvan-Newmanç®—æ³•**: åŸºäºè¾¹ä»‹æ•°çš„å±‚æ¬¡èšç±»
4. **Label Propagation**: æ ‡ç­¾ä¼ æ’­ç®—æ³•ï¼Œé€Ÿåº¦å¿«

### é€‰æ‹©å»ºè®®

- **å¤§å‹é¡¹ç›®**: ä½¿ç”¨Leidenç®—æ³•ï¼Œè´¨é‡æœ€é«˜
- **å¿«é€Ÿåˆ†æ**: ä½¿ç”¨Label Propagationç®—æ³•
- **å±‚æ¬¡ç»“æ„**: ä½¿ç”¨Girvan-Newmanç®—æ³•
- **å¹³è¡¡é€‰æ‹©**: ä½¿ç”¨Louvainç®—æ³•

## æµ‹è¯•

è¿è¡Œæµ‹è¯•å¥—ä»¶:

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
python -m pytest test_code_analysis.py -v

# è¿è¡Œç‰¹å®šæµ‹è¯•ç±»
python -m pytest test_code_analysis.py::TestCodeAnalysis -v

# è¿è¡Œé›†æˆæµ‹è¯•
python -m pytest test_code_analysis.py::TestIntegration -v
```

## ç¤ºä¾‹é¡¹ç›®

é¡¹ç›®åŒ…å«ä¸€ä¸ªç¤ºä¾‹é¡¹ç›®ï¼ˆ`sample_project/`ï¼‰ï¼ŒåŒ…å«ï¼š

- æ•°æ®å¤„ç†æ¨¡å—
- APIæœåŠ¡æ¨¡å—  
- é…ç½®ç®¡ç†æ¨¡å—
- å·¥å…·å‡½æ•°æ¨¡å—
- æ•°æ®æ¨¡å‹æ¨¡å—

å¯ä»¥ä½¿ç”¨æ­¤ç¤ºä¾‹é¡¹ç›®æµ‹è¯•åŠŸèƒ½ï¼š

```bash
python main.py analyze sample_project --detect-communities --generate-report
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **DeepSeek APIé”™è¯¯**
   - æ£€æŸ¥APIå¯†é’¥æ˜¯å¦æ­£ç¡®è®¾ç½®
   - éªŒè¯ç½‘ç»œè¿æ¥
   - æŸ¥çœ‹APIä½¿ç”¨é™åˆ¶

2. **ç¤¾åŒºæ£€æµ‹å¤±è´¥**
   - æ£€æŸ¥æ˜¯å¦å®‰è£…äº†ç›¸å…³ç®—æ³•åº“ï¼ˆleidenalg, python-louvainï¼‰
   - å°è¯•ä½¿ç”¨label_propagationç®—æ³•ä½œä¸ºå¤‡é€‰

3. **å¯è§†åŒ–é—®é¢˜**
   - æ£€æŸ¥matplotlibé…ç½®
   - å°è¯•ä¸åŒçš„å›¾åƒåç«¯

4. **å†…å­˜ä¸è¶³**
   - è°ƒæ•´MAX_FILE_SIZEé™åˆ¶å¤§æ–‡ä»¶
   - ä½¿ç”¨--verboseæŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯

### æ—¥å¿—è°ƒè¯•

```bash
# å¯ç”¨è¯¦ç»†æ—¥å¿—
python main.py analyze /path/to/project --verbose --log-level DEBUG
```

## æ€§èƒ½ä¼˜åŒ–

- **å¤§å‹é¡¹ç›®**: è®¾ç½®åˆé€‚çš„MAX_FILE_SIZEé™åˆ¶
- **å¹¶è¡Œå¤„ç†**: æœªæ¥ç‰ˆæœ¬å°†æ”¯æŒå¤šè¿›ç¨‹åˆ†æ
- **ç¼“å­˜**: DeepSeekåˆ†æç»“æœä¼šè¢«ç¼“å­˜

## è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

## è®¸å¯è¯

[MIT License](LICENSE)

## ğŸ“Š æ€§èƒ½è¡¨ç°

| é¡¹ç›®è§„æ¨¡ | æ–‡ä»¶æ•° | å¿«é€Ÿåˆ†æ | AIå¢å¼ºåˆ†æ | å†…å­˜ä½¿ç”¨ |
|----------|--------|----------|------------|----------|
| å°å‹é¡¹ç›® | <50 | <5ç§’ | <2åˆ†é’Ÿ | <100MB |
| ä¸­å‹é¡¹ç›® | 50-500 | <30ç§’ | <10åˆ†é’Ÿ | <500MB |
| å¤§å‹é¡¹ç›® | 500+ | <2åˆ†é’Ÿ | åˆ†æ‰¹å¤„ç† | <2GB |

## ğŸ“š æ–‡æ¡£

- ğŸ“– **[ç”¨æˆ·æ‰‹å†Œ](USER_MANUAL.md)** - è¯¦ç»†çš„ä½¿ç”¨æŒ‡å—å’Œé…ç½®è¯´æ˜
- ğŸ—ï¸ **[æ¶æ„æ–‡æ¡£](ARCHITECTURE.md)** - ç³»ç»Ÿè®¾è®¡å’ŒæŠ€æœ¯æ¶æ„
- ğŸ“‹ **[é¡¹ç›®æ€»ç»“](PROJECT_SUMMARY.md)** - é¡¹ç›®æ¦‚è§ˆå’ŒæŠ€æœ¯ç‰¹è‰²
- ğŸ§ª **[è®¾è®¡æ–‡æ¡£](ä»£ç åˆ†æ.md)** - åŸå§‹è®¾è®¡æ–‡æ¡£å’Œç±»è®¾è®¡

## ğŸ§ª æµ‹è¯•éªŒè¯

```bash
# è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶
python -m pytest test_code_analysis.py -v

# ç³»ç»ŸåŠŸèƒ½æµ‹è¯•
python main.py test --test-sample --test-deepseek

# æ€§èƒ½åŸºå‡†æµ‹è¯•
python main.py analyze sample_project --detect-communities
```

**æµ‹è¯•ç»“æœ**: âœ… 32ä¸ªæµ‹è¯•ç”¨ä¾‹å…¨éƒ¨é€šè¿‡

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿å„ç§å½¢å¼çš„è´¡çŒ®ï¼

### è´¡çŒ®æ–¹å¼
- ğŸ› **æŠ¥å‘ŠBug**: é€šè¿‡IssuesæŠ¥å‘Šé—®é¢˜
- ğŸ’¡ **åŠŸèƒ½å»ºè®®**: æå‡ºæ–°åŠŸèƒ½æƒ³æ³•
- ğŸ“ **æ–‡æ¡£æ”¹è¿›**: å®Œå–„æ–‡æ¡£å’Œç¤ºä¾‹
- ğŸ”§ **ä»£ç è´¡çŒ®**: æäº¤Pull Request

### å¼€å‘ç¯å¢ƒ
```bash
# 1. Forké¡¹ç›®å¹¶å…‹éš†
git clone <your-fork-url>
cd CodeAnalysis

# 2. åˆ›å»ºå¼€å‘åˆ†æ”¯
git checkout -b feature/your-feature

# 3. å®‰è£…å¼€å‘ä¾èµ–
pip install -r requirements.txt
pip install -e .

# 4. è¿è¡Œæµ‹è¯•
python -m pytest test_code_analysis.py

# 5. æäº¤æ›´æ”¹
git commit -m "feat: add your feature"
git push origin feature/your-feature
```

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ **MITè®¸å¯è¯** - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ”— ç›¸å…³é“¾æ¥

- ğŸ“§ **é—®é¢˜åé¦ˆ**: [GitHub Issues]
- ğŸ’¬ **è®¨è®ºäº¤æµ**: [GitHub Discussions]
- ğŸ“– **åœ¨çº¿æ–‡æ¡£**: [Project Wiki]
- ğŸ¯ **å‘å±•è·¯çº¿**: [Roadmap]

## â­ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®çš„æ”¯æŒï¼š
- [NetworkX](https://networkx.org/) - å›¾è®ºç®—æ³•åº“
- [DeepSeek](https://www.deepseek.com/) - AIè¯­è¨€æ¨¡å‹
- [Plotly](https://plotly.com/) - äº¤äº’å¼å¯è§†åŒ–
- [Matplotlib](https://matplotlib.org/) - é™æ€å›¾è¡¨

## ğŸ“ˆ é¡¹ç›®ç»Ÿè®¡

- ğŸŒŸ **Staræ•°**: æ¬¢è¿Staræ”¯æŒ
- ğŸ´ **Forkæ•°**: æ¬¢è¿Forkä½¿ç”¨
- ğŸ“Š **ä¸‹è½½é‡**: æŒç»­å¢é•¿ä¸­
- ğŸ¯ **æ´»è·ƒåº¦**: ç§¯æç»´æŠ¤æ›´æ–°

---

<div align="center">

**å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸€ä¸ªâ­ï¸æ”¯æŒï¼**

*CodeAnalysis - è®©ä»£ç ç»“æ„å¯è§†åŒ–ï¼Œè®©æ¶æ„ä¼˜åŒ–æ•°æ®åŒ–*

</div>